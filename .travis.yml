dist: xenial
language: python
python:
  - "3.6"
sudo: false
git:
  quiet: true

before_install:
  - git clone https://github.com/tpoisot/barlock.git
  - cp barlock/install.sh .
  - chmod u+x install.sh
  - cp barlock/build.py .
  - cp -r barlock/templates .

install:
  - ./install.sh

script:
  - python build.py

after_script:
  - rm -r barlock
  - rm build.py
  - rm -r templates
  - rm install.sh

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  on:
    branch: master
